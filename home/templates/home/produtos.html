
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Products | RedStore</title>
    <link rel="stylesheet" href="{% static '/css/styles.css' %}">
    
    <script src="https://kit.fontawesome.com/6283a3899a.js" crossorigin="anonymous"></script>
</head>

<style>
    .user-nav {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            font-family: 'Segoe UI', sans-serif;
            font-size: 15px;
            border-radius: 8px;
        }

        .user-greeting {
            color: #333;
        }

        .nav-link {
            text-decoration: none;
            color: #007bff;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: #0056b3;
        }

        .logout {
            color: #dc3545;
        }

        .logout:hover {
            color: #a71d2a;
        }

        .separator {
            color: #999;
        }
</style>


<body>
    <div class="container">
        <!-- menu superior -->
        <div class="navbar" style="margin-top: -20px;">
                <div class="logo">
                    <img src=" {% static 'images\logo_InovaTehc1.png' %} " style=" height: 120px; width: 200px;" alt="Logo">
                </div>
                <nav >
                    <ul id="menuItems" >
                        <li><a href="{% url 'index' %}">Home</a></li>
                        <li><a href="{% url 'produtos' %}">Produtos</a></li>
                        <li><a href="">Sobre</a></li>
                        <li><a href="{% url 'carrinho' %}">Carrinho</a></li>
                        <li><a href="">Conta</a></li>
                    </ul>
                </nav>
                <img src=" {% static 'images/cart.png' %}">
                <img src=" {% static 'images/cart.png' %}" class="menu-icon" onclick="menutoggle()">
                <div class="user-nav">
                    {% if user.is_authenticated %}
                        <span class="user-greeting">Olá, <strong>{{ user.username }}</strong></span>
                        <a href="{% url 'logout' %}" class="nav-link logout">Sair</a>
                    {% else %}
                        <a href="{% url 'login' %}" class="nav-link">Entrar</a>
                        <span class="separator">|</span>
                        <a href="{% url 'cadastro' %}" class="nav-link">Cadastrar</a>
                    {% endif %}
                </div>
            </div>

        <div class="menu" id="menuProduto" onmouseleave="pClose()">
         <div>
            <h4>COMPUTADORES</h4>
            <ul>
                <li><a href="">Notebooks</a></li>
                <li><a href="">Ultrabooks</a></li>
                <li><a href="">PC Gamer</a></li>
                <li><a href="">All-in-One</a></li>
                <li><a href="">Monitores</a></li>
                <li><a href="">Acessórios para PC</a></li>
                <li><a href="">Gabinetes</a></li>
                <li><a href="">Placas de Vídeo</a></li>
                <li><a href="">Processadores</a></li>
                <li><a href="">Memória RAM</a></li>
                <h5><a href="">Ver tudo</a></h5>
            </ul>
        </div>
        <div>
            <h4>SMARTPHONES</h4>
            <ul>
                <li><a href="">Android</a></li>
                <li><a href="">iPhone</a></li>
                <li><a href="">Celulares Intermediários</a></li>
                <li><a href="">Celulares Premium</a></li>
                <li><a href="">Acessórios para Celular</a></li>
                <li><a href="">Fones de Ouvido</a></li>
                <li><a href="">Capinhas</a></li>
                <li><a href="">Películas</a></li>
                <li><a href="">Carregadores</a></li>
                <li><a href="">Power Banks</a></li>
                <h5><a href="">Ver tudo</a></h5>
            </ul>
        </div>
        <div>
            <h4>GADGETS</h4>
            <ul>
                <li><a href="">Smartwatches</a></li>
                <li><a href="">Pulseiras Inteligentes</a></li>
                <li><a href="">Assistentes Virtuais</a></li>
                <li><a href="">Rastreadores</a></li>
                <li><a href="">Tradutores Eletrônicos</a></li>
                <li><a href="">Óculos Inteligentes</a></li>
                <li><a href="">Câmeras 360°</a></li>
                <h5><a href="">Ver tudo</a></h5>
            </ul>
        </div>
        <div>
            <h4>GAMER</h4>
            <ul>
                <li><a href="">Consoles</a></li>
                <li><a href="">Controles</a></li>
                <li><a href="">Jogos</a></li>
                <li><a href="">Headsets</a></li>
                <li><a href="">Cadeiras Gamer</a></li>
                <li><a href="">Teclados e Mouses</a></li>
                <li><a href="">Monitores Gamer</a></li>
                <li><a href="">Luzes RGB</a></li>
                <li><a href="">Volantes e Simuladores</a></li>
                <h5><a href="">Ver tudo</a></h5>
            </ul>
        </div>
        <div>
            <h4>MARCAS</h4>
            <ul>
                <li><a href="">Apple</a></li>
                <li><a href="">Samsung</a></li>
                <li><a href="">Asus</a></li>
                <li><a href="">Acer</a></li>
                <li><a href="">Lenovo</a></li>
                <li><a href="">MSI</a></li>
                <li><a href="">LG</a></li>
                <li><a href="">Motorola</a></li>
                <li><a href="">Xiaomi</a></li>
                <li><a href="">Dell</a></li>
                <li><a href="">Razer</a></li>
                <h5><a href="">Ver tudo</a></h5>
            </ul>
        </div>
        <div>
            <h4>EM ALTA</h4>
            <ul>
                <li><a href="">Realidade Virtual</a></li>
                <li><a href="">Inteligência Artificial</a></li>
                <li><a href="">Casa Inteligente</a></li>
                <li><a href="">Impressoras 3D</a></li>
                <li><a href="">Robótica</a></li>
                <li><a href="">Drones</a></li>
                <li><a href="">Notebooks Gamer</a></li>
                <li><a href="">Wi-Fi 6</a></li>
                <h5><a href="">Tecnologia 5G</a></h5>
            </ul>
        </div>
    </div>

    </div>


<!-------------- featured products ------------>
<div class="small-container">

    <div class="col-4">
        <h2>Produtos</h2>
        <form method="get" action="" style="display: flex; flex-wrap: wrap; align-items: center;">
            <input type="text" name="pesq" value="{{ request.GET.pesq }}" placeholder="Buscar produto por nome..." style="padding: 8px; width: 100%; max-width: 300px; margin: 10px 5px 10px 0;">
            <button type="submit" style="padding: 8px 12px; background-color: #ff5c5c; color: white; border: none; border-radius: 4px; cursor: pointer;">
                Pesquisar
            </button>
        </form>
    </div>

    <!-- Primeira seção: Produtos (4 por página) -->
    <div class="row" data-anime="left">
        <div id="produtos-container">
            {% for produto in produtos %}
                {% if forloop.counter0|divisibleby:4 %}
                    <div class="row page page-produtos" style="display: {% if forloop.first %}flex{% else %}none{% endif %};"> 
                {% endif %}

                <div class="col-4" data-nome="{{ produto.nome|lower }}">
                    <a href="{% url 'detalhe_produto' produto.id %}">
                        <img src="{{ produto.imagem.url }}" alt="{{ produto.nome }}" style="height: 200px;">
                    </a>
                    <h4>{{ produto.nome }}</h4>
                    <div class="rating">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star-half-stroke"></i>
                    </div>
                    
                    <p>R$ {{ produto.preco }}</p>
                </div>

                {% if forloop.counter|divisibleby:4 or forloop.last %}
                    </div>
                {% endif %}
            {% endfor %}
        </div> 
    </div>

    <!-- Segunda seção: Produtos em Destaque (12 por página) -->
    <div class="small-container" data-anime="left">
        <h2 class="title">Produtos em Destaque</h2>
        
        <div id="produtos-container">
            {% for produto in produtos %}
                {% if forloop.counter0|divisibleby:12 %}
                    <div class="row page page-destaque" style="display: {% if forloop.first %}flex{% else %}none{% endif %};">
                {% endif %}

                <div class="col-4" data-nome="{{ produto.nome|lower }}">
                    <a href="{% url 'detalhe_produto' produto.id %}">
                        <img src="{{ produto.imagem.url }}" alt="{{ produto.nome }}" height="200px" >
                    </a>
                    <h4>{{ produto.nome }}</h4>
                    <div class="rating">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star-half-stroke"></i>
                    </div>
                    <p>R$ {{ produto.preco }}</p>
                </div>

                {% if forloop.counter|divisibleby:12 or forloop.last %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <div style="text-align:center; margin-top: 20px;">
            <button id="ver-outros" class="btn">Ver outros</button>
        </div>
    </div>

    <!-- Paginação -->
    <div class="page-btn" id="pagination">
        <span class="page-link active">1</span>
        <span class="page-link">2</span>
        <span class="page-link">3</span>
        <span class="page-link">4</span>
        <span class="page-link">&#8594;</span>
    </div>
</div>

<!-- Estilo -->
<style>
    .page-link.active {
        background-color: #333;
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
    }
    .page-link {
        cursor: pointer;
        margin: 0 5px;
        padding: 5px 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    .produto-img {
        width: 100%;
        height: 220px;
        object-fit: cover;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
    }

    .col-4 {
        padding: 10px;
    }

    .produto-img:hover {
        transform: scale(1.05);
    }
</style>

<!-- Script -->
<script>
    // Filtro por nome
    const inputBusca = document.getElementById("busca-produto");
    const todosProdutos = document.querySelectorAll(".col-4");

    inputBusca.addEventListener("input", () => {
        const termo = inputBusca.value.trim().toLowerCase();

        todosProdutos.forEach(produto => {
            const nomeProduto = produto.getAttribute("data-nome");

            if (nomeProduto.startsWith(termo) || termo === "") {
                produto.style.display = "block";
            } else {
                produto.style.display = "none";
            }
        });
    });

    // Paginação sincronizada
    document.addEventListener("DOMContentLoaded", () => {
        const produtosPages = document.querySelectorAll(".page-produtos");
        const destaquePages = document.querySelectorAll(".page-destaque");
        const pageLinks = document.querySelectorAll(".page-link");

        function showPage(index) {
            produtosPages.forEach((p, i) => {
                p.style.display = (i === index) ? "flex" : "none";
            });
            destaquePages.forEach((p, i) => {
                p.style.display = (i === index) ? "flex" : "none";
            });
        }

        pageLinks.forEach((link, index) => {
            link.addEventListener("click", () => {
                const isArrow = link.innerText.trim() === "→";
                let currentIndex = [...pageLinks].findIndex(l => l.classList.contains("active"));
                let nextIndex = 0;

                if (isArrow) {
                    nextIndex = currentIndex < produtosPages.length - 1 ? currentIndex + 1 : 0;
                } else {
                    nextIndex = parseInt(link.innerText.trim()) - 1;
                }

                showPage(nextIndex);
                pageLinks.forEach(l => l.classList.remove("active"));
                if (!isArrow) {
                    link.classList.add("active");
                } else {
                    pageLinks[nextIndex].classList.add("active");
                }
            });
        });

        const verOutrosBtn = document.getElementById("ver-outros");
        if (verOutrosBtn) {
            verOutrosBtn.addEventListener("click", () => {
                let currentIndex = [...pageLinks].findIndex(l => l.classList.contains("active"));
                let nextIndex = (currentIndex + 1) % produtosPages.length;
                showPage(nextIndex);
                pageLinks.forEach(l => l.classList.remove("active"));
                pageLinks[nextIndex].classList.add("active");
            });
        }
    });
</script>

    <!-- ------------------ footer ---------------- -->
    <div class="footer">
    <div class="container">
        <div class="row">
            <div class="footer-col-1">
                <h3>Baixe Nosso App</h3>
                <p>Baixe o aplicativo para celulares Android e iOS.</p>
                <div class="app-logo">
                    <img src="images/play-store.png">
                    <img src="images/app-store.png">
                </div>
            </div>
            <div class="footer-col-2">
                <img src="images/logo_InovaTehc.png">
                <p>
                    Nosso propósito é tornar os benefícios dos esportes acessíveis a todos de forma sustentável.
                </p>
            </div>
            <div class="footer-col-3">
                <h3>Links Úteis</h3>
                <ul>
                    <li>Cupons</li>
                    <li>Postagens no Blog</li>
                    <li>Política de Devolução</li>
                    <li>Programa de Afiliados</li>
                </ul>
            </div>
            <div class="footer-col-4">
                <h3>Siga-nos</h3>
                <ul>
                    <li>Facebook</li>
                    <li>Twitter</li>
                    <li>Instagram</li>
                    <li>YouTube</li>
                </ul>
            </div>
        </div>
        <hr>
            <p class="copyright">Copyright 2025 - TechStore</p>
        </div>
    </div>
    <script>
       // ----------- função para aparece o menuSuspenso -------
        var menuSuspenso = document.getElementById("menuProduto");


        function pEnter() {
            menuSuspenso.style.display = 'grid'
        }

        function pClose() {
            menuSuspenso.style.display = 'none'
        }

        // -------------- function para o menu na vertical quando a tela esta pequena--------------
        var MenuItems = document.getElementById('menuItems');

        MenuItems.style.maxHeight = "0px";

        function menutoggle() {
            if (MenuItems.style.maxHeight == "0px") {
                MenuItems.style.maxHeight = "200px"
            } else {
                MenuItems.style.maxHeight = "0px"
            }
        }

        // animar todos os itens na tela que tiverem meu atributo data-anime

        const item = document.querySelectorAll("[data-anime]");

        const animeScroll = () => {
            const windowTop = window.scrollY + window.innerHeight * 0.65 ;

            item.forEach((element) => {
                if (windowTop > element.offsetTop) {
                    element.classList.add("animate");
                } else {
                element.classList.remove("animate")
                }
            });
        };

        animeScroll();
        window.addEventListener("scroll", () => {
            animeScroll();
        })


        /* ---------- js para products gallery ----------- */
        // para mudar a foto de destaque na pagina
        var ProductImg = document.getElementById('product-img');
        var SmallImg = document.getElementsByClassName('small-img');

        SmallImg[0].onclick = function(){
        ProductImg.src = SmallImg[0].src;
        }
        SmallImg[1].onclick = function(){
        ProductImg.src = SmallImg[1].src;
        }
        SmallImg[2].onclick = function(){
        ProductImg.src = SmallImg[2].src;
        }
        SmallImg[3].onclick = function(){
        ProductImg.src = SmallImg[3].src;
        }



    </script>
    <script src="{% static 'js/index.js' %}"></script>
</body>

</html>